<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implementation of the libp2p-specific Kademlia protocol."><title>libp2p::kad - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="libp2p" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.1 (4eb161250 2025-03-15)" data-channel="1.85.1" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="../../crates.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="icon" href="https://libp2p.io/img/favicon.png"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../libp2p/index.html"><img src="https://libp2p.io/img/logo_small.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../libp2p/index.html"><img src="https://libp2p.io/img/logo_small.png" alt="logo"></a><h2><a href="../../libp2p/index.html">libp2p</a><span class="version">0.52.4</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#important-discrepancies" title="Important Discrepancies">Important Discrepancies</a></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">libp2p</a></span><h1>Crate <span>kad</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/libp2p_kad/lib.rs.html#21-142">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implementation of the libp2p-specific <a href="https://github.com/libp2p/specs/blob/master/kad-dht/README.md">Kademlia</a> protocol.</p>
<h2 id="important-discrepancies"><a class="doc-anchor" href="#important-discrepancies">§</a>Important Discrepancies</h2>
<ul>
<li><strong>Peer Discovery with Identify</strong> In other libp2p implementations, the
<a href="https://github.com/libp2p/specs/tree/master/identify">Identify</a> protocol might be seen as a core protocol. Rust-libp2p
tries to stay as generic as possible, and does not make this assumption.
This means that the Identify protocol must be manually hooked up to Kademlia through calls
to <a href="struct.Behaviour.html#method.add_address" title="method libp2p::kad::Behaviour::add_address"><code>Behaviour::add_address</code></a>.
If you choose not to use the Identify protocol, and do not provide an alternative peer
discovery mechanism, a Kademlia node will not discover nodes beyond the network’s
<a href="https://docs.libp2p.io/concepts/glossary/#boot-node">boot nodes</a>. Without the Identify protocol,
existing nodes in the kademlia network cannot obtain the listen addresses
of nodes querying them, and thus will not be able to add them to their routing table.</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="record/index.html" title="mod libp2p::kad::record">record</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AddProviderOk.html" title="struct libp2p::kad::AddProviderOk">AddProvider<wbr>Ok</a></div><div class="desc docblock-short">The successful result of publishing a provider record.</div></li><li><div class="item-name"><a class="struct" href="struct.Addresses.html" title="struct libp2p::kad::Addresses">Addresses</a></div><div class="desc docblock-short">A non-empty list of (unique) addresses of a peer in the routing table.</div></li><li><div class="item-name"><a class="struct" href="struct.Behaviour.html" title="struct libp2p::kad::Behaviour">Behaviour</a></div><div class="desc docblock-short"><code>Behaviour</code> is a <code>NetworkBehaviour</code> that implements the libp2p
Kademlia protocol.</div></li><li><div class="item-name"><a class="struct" href="struct.BootstrapOk.html" title="struct libp2p::kad::BootstrapOk">Bootstrap<wbr>Ok</a></div><div class="desc docblock-short">The successful result of <a href="struct.Behaviour.html#method.bootstrap" title="method libp2p::kad::Behaviour::bootstrap"><code>Behaviour::bootstrap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Config.html" title="struct libp2p::kad::Config">Config</a></div><div class="desc docblock-short">The configuration for the <code>Kademlia</code> behaviour.</div></li><li><div class="item-name"><a class="struct" href="struct.EntryView.html" title="struct libp2p::kad::EntryView">Entry<wbr>View</a></div><div class="desc docblock-short">A cloned, immutable view of an entry that is either present in a bucket
or pending insertion.</div></li><li><div class="item-name"><a class="struct" href="struct.GetClosestPeersOk.html" title="struct libp2p::kad::GetClosestPeersOk">GetClosest<wbr>Peers<wbr>Ok</a></div><div class="desc docblock-short">The successful result of <a href="struct.Behaviour.html#method.get_closest_peers" title="method libp2p::kad::Behaviour::get_closest_peers"><code>Behaviour::get_closest_peers</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.KBucketDistance.html" title="struct libp2p::kad::KBucketDistance">KBucket<wbr>Distance</a></div><div class="desc docblock-short">A distance between two keys in the DHT keyspace.</div></li><li><div class="item-name"><a class="struct" href="struct.KBucketKey.html" title="struct libp2p::kad::KBucketKey">KBucket<wbr>Key</a></div><div class="desc docblock-short">A <code>Key</code> in the DHT keyspace with preserved preimage.</div></li><li><div class="item-name"><a class="struct" href="struct.KBucketRef.html" title="struct libp2p::kad::KBucketRef">KBucket<wbr>Ref</a></div><div class="desc docblock-short">A reference to a bucket.</div></li><li><div class="item-name"><a class="struct" href="struct.NoKnownPeers.html" title="struct libp2p::kad::NoKnownPeers">NoKnown<wbr>Peers</a></div><div class="desc docblock-short">An operation failed to due no known peers in the routing table.</div></li><li><div class="item-name"><a class="struct" href="struct.PeerRecord.html" title="struct libp2p::kad::PeerRecord">Peer<wbr>Record</a></div><div class="desc docblock-short">A record either received by the given peer or retrieved from the local
record store.</div></li><li><div class="item-name"><a class="struct" href="struct.ProgressStep.html" title="struct libp2p::kad::ProgressStep">Progress<wbr>Step</a></div><div class="desc docblock-short">Information about progress events.</div></li><li><div class="item-name"><a class="struct" href="struct.ProviderRecord.html" title="struct libp2p::kad::ProviderRecord">Provider<wbr>Record</a></div><div class="desc docblock-short">A record stored in the DHT whose value is the ID of a peer
who can provide the value on-demand.</div></li><li><div class="item-name"><a class="struct" href="struct.PutRecordOk.html" title="struct libp2p::kad::PutRecordOk">PutRecord<wbr>Ok</a></div><div class="desc docblock-short">The successful result of <a href="struct.Behaviour.html#method.put_record" title="method libp2p::kad::Behaviour::put_record"><code>Behaviour::put_record</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryId.html" title="struct libp2p::kad::QueryId">QueryId</a></div><div class="desc docblock-short">Unique identifier for an active query.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryMut.html" title="struct libp2p::kad::QueryMut">Query<wbr>Mut</a></div><div class="desc docblock-short">A mutable reference to a running query.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryRef.html" title="struct libp2p::kad::QueryRef">Query<wbr>Ref</a></div><div class="desc docblock-short">An immutable reference to a running query.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryStats.html" title="struct libp2p::kad::QueryStats">Query<wbr>Stats</a></div><div class="desc docblock-short">Execution statistics of a query.</div></li><li><div class="item-name"><a class="struct" href="struct.Record.html" title="struct libp2p::kad::Record">Record</a></div><div class="desc docblock-short">A record stored in the DHT.</div></li><li><div class="item-name"><a class="struct" href="struct.RecordKey.html" title="struct libp2p::kad::RecordKey">Record<wbr>Key</a></div><div class="desc docblock-short">The (opaque) key of a record.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AddProviderContext.html" title="enum libp2p::kad::AddProviderContext">AddProvider<wbr>Context</a></div><div class="desc docblock-short">The context of a <a href="enum.QueryInfo.html#variant.AddProvider" title="variant libp2p::kad::QueryInfo::AddProvider"><code>QueryInfo::AddProvider</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.AddProviderError.html" title="enum libp2p::kad::AddProviderError">AddProvider<wbr>Error</a></div><div class="desc docblock-short">The possible errors when publishing a provider record.</div></li><li><div class="item-name"><a class="enum" href="enum.AddProviderPhase.html" title="enum libp2p::kad::AddProviderPhase">AddProvider<wbr>Phase</a></div><div class="desc docblock-short">The phases of a <a href="enum.QueryInfo.html#variant.AddProvider" title="variant libp2p::kad::QueryInfo::AddProvider"><code>QueryInfo::AddProvider</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.BootstrapError.html" title="enum libp2p::kad::BootstrapError">Bootstrap<wbr>Error</a></div><div class="desc docblock-short">The error result of <a href="struct.Behaviour.html#method.bootstrap" title="method libp2p::kad::Behaviour::bootstrap"><code>Behaviour::bootstrap</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.BucketInserts.html" title="enum libp2p::kad::BucketInserts">Bucket<wbr>Inserts</a></div><div class="desc docblock-short">The configurable strategies for the insertion of peers
and their addresses into the k-buckets of the Kademlia
routing table.</div></li><li><div class="item-name"><a class="enum" href="enum.Caching.html" title="enum libp2p::kad::Caching">Caching</a></div><div class="desc docblock-short">The configuration for Kademlia “write-back” caching after successful
lookups via <a href="struct.Behaviour.html#method.get_record" title="method libp2p::kad::Behaviour::get_record"><code>Behaviour::get_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.ConnectionType.html" title="enum libp2p::kad::ConnectionType">Connection<wbr>Type</a></div><div class="desc docblock-short">Status of our connection to a node reported by the Kademlia protocol.</div></li><li><div class="item-name"><a class="enum" href="enum.Event.html" title="enum libp2p::kad::Event">Event</a></div><div class="desc docblock-short">The events produced by the <code>Kademlia</code> behaviour.</div></li><li><div class="item-name"><a class="enum" href="enum.GetClosestPeersError.html" title="enum libp2p::kad::GetClosestPeersError">GetClosest<wbr>Peers<wbr>Error</a></div><div class="desc docblock-short">The error result of <a href="struct.Behaviour.html#method.get_closest_peers" title="method libp2p::kad::Behaviour::get_closest_peers"><code>Behaviour::get_closest_peers</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetProvidersError.html" title="enum libp2p::kad::GetProvidersError">GetProviders<wbr>Error</a></div><div class="desc docblock-short">The error result of <a href="struct.Behaviour.html#method.get_providers" title="method libp2p::kad::Behaviour::get_providers"><code>Behaviour::get_providers</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetProvidersOk.html" title="enum libp2p::kad::GetProvidersOk">GetProviders<wbr>Ok</a></div><div class="desc docblock-short">The successful result of <a href="struct.Behaviour.html#method.get_providers" title="method libp2p::kad::Behaviour::get_providers"><code>Behaviour::get_providers</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetRecordError.html" title="enum libp2p::kad::GetRecordError">GetRecord<wbr>Error</a></div><div class="desc docblock-short">The error result of <a href="struct.Behaviour.html#method.get_record" title="method libp2p::kad::Behaviour::get_record"><code>Behaviour::get_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetRecordOk.html" title="enum libp2p::kad::GetRecordOk">GetRecord<wbr>Ok</a></div><div class="desc docblock-short">The successful result of <a href="struct.Behaviour.html#method.get_record" title="method libp2p::kad::Behaviour::get_record"><code>Behaviour::get_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.InboundRequest.html" title="enum libp2p::kad::InboundRequest">Inbound<wbr>Request</a></div><div class="desc docblock-short">Information about a received and handled inbound request.</div></li><li><div class="item-name"><a class="enum" href="enum.Mode.html" title="enum libp2p::kad::Mode">Mode</a></div></li><li><div class="item-name"><a class="enum" href="enum.NodeStatus.html" title="enum libp2p::kad::NodeStatus">Node<wbr>Status</a></div><div class="desc docblock-short">The status of a node in a bucket.</div></li><li><div class="item-name"><a class="enum" href="enum.PutRecordContext.html" title="enum libp2p::kad::PutRecordContext">PutRecord<wbr>Context</a></div><div class="desc docblock-short">The context of a <a href="enum.QueryInfo.html#variant.PutRecord" title="variant libp2p::kad::QueryInfo::PutRecord"><code>QueryInfo::PutRecord</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.PutRecordError.html" title="enum libp2p::kad::PutRecordError">PutRecord<wbr>Error</a></div><div class="desc docblock-short">The error result of <a href="struct.Behaviour.html#method.put_record" title="method libp2p::kad::Behaviour::put_record"><code>Behaviour::put_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.PutRecordPhase.html" title="enum libp2p::kad::PutRecordPhase">PutRecord<wbr>Phase</a></div><div class="desc docblock-short">The phases of a <a href="enum.QueryInfo.html#variant.PutRecord" title="variant libp2p::kad::QueryInfo::PutRecord"><code>QueryInfo::PutRecord</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.QueryInfo.html" title="enum libp2p::kad::QueryInfo">Query<wbr>Info</a></div><div class="desc docblock-short">Information about a running query.</div></li><li><div class="item-name"><a class="enum" href="enum.QueryResult.html" title="enum libp2p::kad::QueryResult">Query<wbr>Result</a></div><div class="desc docblock-short">The results of Kademlia queries.</div></li><li><div class="item-name"><a class="enum" href="enum.Quorum.html" title="enum libp2p::kad::Quorum">Quorum</a></div><div class="desc docblock-short">A quorum w.r.t. the configured replication factor specifies the minimum
number of distinct nodes that must be successfully contacted in order
for a query to succeed.</div></li><li><div class="item-name"><a class="enum" href="enum.RoutingUpdate.html" title="enum libp2p::kad::RoutingUpdate">Routing<wbr>Update</a></div><div class="desc docblock-short">The possible outcomes of <a href="struct.Behaviour.html#method.add_address" title="method libp2p::kad::Behaviour::add_address"><code>Behaviour::add_address</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.StoreInserts.html" title="enum libp2p::kad::StoreInserts">Store<wbr>Inserts</a></div><div class="desc docblock-short">The configurable filtering strategies for the acceptance of
incoming records.</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.ALPHA_VALUE.html" title="constant libp2p::kad::ALPHA_VALUE">ALPHA_<wbr>VALUE</a></div><div class="desc docblock-short">The <code>α</code> parameter of the Kademlia specification.</div></li><li><div class="item-name"><a class="constant" href="constant.K_VALUE.html" title="constant libp2p::kad::K_VALUE">K_VALUE</a></div><div class="desc docblock-short">The <code>k</code> parameter of the Kademlia specification.</div></li><li><div class="item-name"><a class="constant" href="constant.PROTOCOL_NAME.html" title="constant libp2p::kad::PROTOCOL_NAME">PROTOCOL_<wbr>NAME</a></div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.AddProviderResult.html" title="type libp2p::kad::AddProviderResult">AddProvider<wbr>Result</a></div><div class="desc docblock-short">The result of publishing a provider record.</div></li><li><div class="item-name"><a class="type" href="type.BootstrapResult.html" title="type libp2p::kad::BootstrapResult">Bootstrap<wbr>Result</a></div><div class="desc docblock-short">The result of <a href="struct.Behaviour.html#method.bootstrap" title="method libp2p::kad::Behaviour::bootstrap"><code>Behaviour::bootstrap</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.GetClosestPeersResult.html" title="type libp2p::kad::GetClosestPeersResult">GetClosest<wbr>Peers<wbr>Result</a></div><div class="desc docblock-short">The result of <a href="struct.Behaviour.html#method.get_closest_peers" title="method libp2p::kad::Behaviour::get_closest_peers"><code>Behaviour::get_closest_peers</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.GetProvidersResult.html" title="type libp2p::kad::GetProvidersResult">GetProviders<wbr>Result</a></div><div class="desc docblock-short">The result of <a href="struct.Behaviour.html#method.get_providers" title="method libp2p::kad::Behaviour::get_providers"><code>Behaviour::get_providers</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.GetRecordResult.html" title="type libp2p::kad::GetRecordResult">GetRecord<wbr>Result</a></div><div class="desc docblock-short">The result of <a href="struct.Behaviour.html#method.get_record" title="method libp2p::kad::Behaviour::get_record"><code>Behaviour::get_record</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.KadConnectionType.html" title="type libp2p::kad::KadConnectionType">KadConnection<wbr>Type</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.Kademlia.html" title="type libp2p::kad::Kademlia">Kademlia</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.KademliaBucketInserts.html" title="type libp2p::kad::KademliaBucketInserts">Kademlia<wbr>Bucket<wbr>Inserts</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.KademliaCaching.html" title="type libp2p::kad::KademliaCaching">Kademlia<wbr>Caching</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.KademliaConfig.html" title="type libp2p::kad::KademliaConfig">Kademlia<wbr>Config</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.KademliaEvent.html" title="type libp2p::kad::KademliaEvent">Kademlia<wbr>Event</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.KademliaStoreInserts.html" title="type libp2p::kad::KademliaStoreInserts">Kademlia<wbr>Store<wbr>Inserts</a><wbr><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.PutRecordResult.html" title="type libp2p::kad::PutRecordResult">PutRecord<wbr>Result</a></div><div class="desc docblock-short">The result of <a href="struct.Behaviour.html#method.put_record" title="method libp2p::kad::Behaviour::put_record"><code>Behaviour::put_record</code></a>.</div></li></ul></section></div></main></body></html>