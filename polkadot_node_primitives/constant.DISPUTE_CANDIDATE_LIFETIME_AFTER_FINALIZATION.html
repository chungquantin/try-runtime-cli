<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="How many blocks after finalization an information about backed/included candidate should be pre-loaded (when scraping onchain votes) and kept locally (when pruning)."><title>DISPUTE_CANDIDATE_LIFETIME_AFTER_FINALIZATION in polkadot_node_primitives - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="polkadot_node_primitives" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.1 (4eb161250 2025-03-15)" data-channel="1.85.1" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc constant"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../polkadot_node_primitives/index.html">polkadot_<wbr>node_<wbr>primitives</a><span class="version">7.0.0</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">polkadot_node_primitives</a></span><h1>Constant <span class="constant">DISPUTE_CANDIDATE_LIFETIME_AFTER_FINALIZATION</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/polkadot_node_primitives/lib.rs.html#98">Source</a> </span></div><pre class="rust item-decl"><code>pub const DISPUTE_CANDIDATE_LIFETIME_AFTER_FINALIZATION: <a class="type" href="../polkadot_core_primitives/type.BlockNumber.html" title="type polkadot_core_primitives::BlockNumber">BlockNumber</a> = 10;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>How many blocks after finalization an information about backed/included candidate should be
pre-loaded (when scraping onchain votes) and kept locally (when pruning).</p>
<p>We don’t want to remove scraped candidates on finalization because we want to
be sure that disputes will conclude on abandoned forks.
Removing the candidate on finalization creates a possibility for an attacker to
avoid slashing. If a bad fork is abandoned too quickly because another
better one gets finalized the entries for the bad fork will be pruned and we
might never participate in a dispute for it.</p>
<p>Why pre-load finalized blocks? I dispute might be raised against finalized candidate. In most
of the cases it will conclude valid (otherwise we are in big trouble) but never the less the
node must participate. It’s possible to see a vote for such dispute onchain before we have it
imported by <code>dispute-distribution</code>. In this case we won’t have <code>CandidateReceipt</code> and the import
will fail unless we keep them preloaded.</p>
<p>This value should consider the timeout we allow for participation in approval-voting. In
particular, the following condition should hold:</p>
<p>slot time * <code>DISPUTE_CANDIDATE_LIFETIME_AFTER_FINALIZATION</code> &gt; <code>APPROVAL_EXECUTION_TIMEOUT</code></p>
<ul>
<li>slot time</li>
</ul>
</div></details></section></div></main></body></html>